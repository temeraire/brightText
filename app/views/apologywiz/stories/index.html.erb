<style type="text/css" media="screen">
  textarea.dataport{
    width:764px;
    height:392px;
    resize:none;
  }

  DIV.harnesscontainer{
    width:834px;
    height:34px;
    margin:5px;
    padding:5px;
    float:left;
    border: 1px dotted black
  }

  DIV.viewportcontainer{
    width:480px;
    height:140px;
    margin:5px;
    padding:5px;
    float:left;
  }

  DIV.btEditor{
    height:150px;
    padding:10px;
  }

</style>
<ul id="story_tabs" class="nav nav-tabs nav-justified">
  <li class="active"><a href="#step_1"><h5>Step-1</h5></a></li>
  <li><a href="#step_2"><h5>Step-2</h5></a></li>
</ul>
<!-- Tab panes -->
<div class="tab-content">
  <div class="tab-pane active" id="step_1">
        <div class="jumbotron">
          <div class="container">
            <div class="col-md-6">
              <%= form_for([:apologywiz, @story], :html => { :role => "form", :class=>"form"}, :validate => true) do |f| %>
              <div class="form-group">
                <label class="control-label">Title</label>
                <%= f.text_field :category, class: 'form-control', placeholder: "example: John's Apologies" %>
              </div>
              <div class="form-group">
                <label class="control-label">Subtitle</label>
                <%= f.text_field :name, class: 'form-control', placeholder: "example: Sorry I've been a creep" %>
              </div>
              <% end %>
            </div>
            <div class="col-md-6">
              <h3>Apologies List</h3>
              <div class="col-md-12">
                <table id="main-table" class="table table-bordered table-striped tablesorter tablesorter-bootstrap" >
                  <thead>
                    <tr>
                      <th data-sort="int" style="width:50px;"><b>ID</b></th>
                      <th data-sort="string" style="width:500px;"><b>Name</b></th>
                      <th data-sort="int" style="width:50px;"><b>Rank</b></th>
                    </tr>
                  </thead>
                  <tbody style="align:center">

                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
  </div>
  <div class="tab-pane" id="step_2">

      <div class="jumbotron">
        <div class="container">
          <%= form_for([:apologywiz,@story], :validate => true, :html => { :method => :put, class: 'edit_story'}, :remote => true) do |f| %>
          <div class="row">
          <div class="col-md-6">
          <!--   END WAND END WAND END WAND  -->
          <%= f.hidden_field :id, id: 'story_id' %>
          <h3 id="category_name"><%= @story.category %></h3>
          <h2 id="name"><%= @story.name %></h2>
          <label for="description" class="control-label"><h4>Please enter some text</h4></label>
          <div class="row">
            <!--   WAND WAND WAND WAND WAND  -->
            <div id="main_container" class="col-md-12" style="height:250px">
              <div class="panel panel-primary">
                <div class="panel-heading">
                  <h3 class="panel-title">Editor</h3>
                </div>
                <div class="panel-body">
                  <div id="bt_one" class="form-control btEditor">BT Wand</div>
                </div>
              </div>
            </div>
          </div>
          <%= f.hidden_field :description, class: 'txtarea', id: 'fieldSummary' %>
          <%= f.hidden_field :descriptor,  :id => "fieldDescriptor" %>

        </div>
          <div class="col-md-6">
            <br/>
            <div class="bs-callout bs-callout-info" style="display: none">
              <p>Highlight some text and right-click</p>
              <p>Select 'Create Changepoint'</p>
              <p>Enter some alternative text</p>
              <p>Hit 'enter'</p>
              <p>Click away from the Changepoint menu to make it disappear.</p>
              <p>Click on the Changepoint you've created to see your changes. Be sure to Save!</p>
            </div>
          </div>
          </div>
          <div class="row">
            <div class="col-md-2">
              <%= f.submit :id => "save_story_btn", :value => "Save " + session[:style].story_alias.titleize, :class => "btn btn-primary" %>
            </div>
            <div class="col-md-6 col-md-offset-4">
              <span class="clk"><h4>Advanced Features</h4></span>
              <p><a href="#"><h4>View a video on more advanced features</h4></a></p>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <h4>Click Save at any time. Then restart the app on your mobile device to see what you created!</h4>
            </div>
          </div>
          <% end %>
        </div>
      </div>

  </div>
</div>
<script>
  $(function(){
    $("#main-table").tablesorter();
  });

  $('#story_tabs a').click(function(e){
    e.preventDefault();
    $(this).tab('show');
  });


  $(document).ready(function() {
    $('span.clk').hover(function(){$("div.bs-callout-info").show();},
                        function(){$("div.bs-callout-info").hide();}
    );
  });

  $(document).ready(function() {

    _bt1 = new BrightTextEditor("bt_one", true);
    var rawData = $("#fieldDescriptor");
    var textData = $("#fieldSummary");

    _bt1.onChange(function() {
      rawData[0].value = $.toJSON(_bt1.toData());
      textData[0].value = _bt1.toString();
    });


  });

</script>